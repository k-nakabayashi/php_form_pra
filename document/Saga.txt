サーガートランザクション

「分離性を失ったトランザクション」
・更新の消失
　サーガ１が実行中に、サーガ２がデータを上書き
　→サーガ１の更新内容が消失

・ダーティリード
　タイミングの問題
　サーガ１の実行とサーガ２の実行が
　それらの内容が依存しているのに
　それらのタイミング食い違う

　買掛限度額3000万円から1000万円に変えたのに、
　それが反映されず、サーガーのトランザクションが進む。

　※非同期ゆえの問題

・ファジー/反復不能読み取り

「サーガ内のトランザクション構成」
補償可能トランザクション
ピボットトランザクション
再試行可能トランザクション

「カウンターメジャー：分離性欠如に対する解決策」
Semantic Lock
→状態フラグを変更させて、ロックする

Commutative Upatades

Pessmistic View
トランザクションの順序を変えた構成にする
・買掛限度額変更
・フラグ変更
↓
・フラグ
・買掛限度額変更

Reread Value
レコードの更新有無を確認
・更新されていたら、補償トランザクション起動してロールバック

Version File
？
By Value
？













